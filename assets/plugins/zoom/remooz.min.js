/**
 * remooz - Remooz a zoom function for pictures
 * @version v2.1.0
 * @link http://coalescecreate.com
 * @author richard@coalescecreate.com - Coalesce Create
 * @license MIT
 */
!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window):e(jQuery,window)}(function(e,o){var t={isImageLoaded:function(e){return e.complete?"undefined"!=typeof e.naturalWidth&&0===e.naturalWidth?!1:!0:!1},assignImgVariables:function(e){var o=this;if("naturalWidth"in new Image)o.set.zoomSizeX=e.naturalWidth,o.set.zoomSizeY=e.naturalHeight;else{var t=new Image;t.src=e.src,o.set.zoomSizeX=t.width,o.set.zoomSizeY=t.height}"none"!==o.set.mgBehaviour&&o.set.$zoomMG.css({"background-image":"url("+e.src+")","background-color":"#fff","background-size":o.set.zoomSizeX+"px "+o.set.zoomSizeY+"px"})},testIfLoaded:function(){var s=this,n=e("#"+s.set.zoomID);!function i(){t.isImageLoaded(n[0])?(t.assignImgVariables.apply(s,[n[0]]),s.set.$zoomImgCont.find("video").length>0&&s.set.$zoomImgCont.find("video")[0].pause(),s.set.$zoomImgCont.find("img,video").hide(),n.fadeIn(200,function(){t.manipulateZoomImg.apply(s)}),t.manipulateZoomImg.apply(s),e(o).trigger("remooz.imgLoaded"),s.set.$zoomCont.find(s.set.preloader).hide()):requestAnimFrame(i)}()},initZoomImg:function(o,s){var n=this,i="",m=/\.(jpg|jpeg|png|gif|mp4)$/i,r=null;void 0===s&&(n.set.single===!1&&(r="none"!==n.set.mgBehaviour?o.index()-1:o.index(),0!==r||o.parent().is(n.set.zoomPool)||(r=o.parent().index()),n.set.debug===!0&&console.info("Zoom Image = ",o),n.set.currImg={pos:r,len:n.find(n.set.zoomPool+" img").length},1===n.set.currImg.len?n.set.$zoomImgCont.parent().find(n.set.prev+","+n.set.next).hide():n.set.$zoomImgCont.parent().find(n.set.prev+","+n.set.next).show()),(n.set.zoomTrigger!==!1||"none"===n.set.mgBehaviour)&&n.set.single!==!1&&(n.set.currImg={pos:n.set.singleIndex,len:e(n.set.single).length})),n.set.debug===!0&&0===o.length&&console.warn('No "zoomImg" found check your settings - default img.current'),i=void 0!==o.data("remooz-zoom-url")?o.data("remooz-zoom-url"):o.attr("src"),n.set.zoomID=m.test(i)?"js-remooz-"+i.split("/").pop().replace(m,""):"js-remooz-"+i.split("/").pop(),0===e("#"+n.set.zoomID).length||"IMG"===e("#"+n.set.zoomID).nodeName&&!t.isImageLoaded(e("#"+n.set.zoomID)[0])?(n.set.$zoomCont.find(n.set.preloader).show(),n.set.sizeX=o.width(),n.set.sizeY=o.height(),i=void 0!==o.data("remooz-zoom-url")?o.data("remooz-zoom-url"):o.attr("src").replace(n.set.srcRegexp,n.set.srcStrReplace),n.set.$zoomImgCont.append(/\.mp4$/.test(i)?'<video id="'+n.set.zoomID+'" src="'+i+'" autoplay playsinline style="z-index: '+n.set.zoomZIndex+';"></video>':'<img id="'+n.set.zoomID+'" src="'+i+'" style="z-index: '+n.set.zoomZIndex+'; width: 0; height: 0;" />'),/\.mp4$/.test(i)?(n.set.$zoomImgCont.find("video").length>0&&n.set.$zoomImgCont.find("video")[0].pause(),n.set.$zoomImgCont.find("img,video").hide(),e("#"+n.set.zoomID)[0].play(),e("#"+n.set.zoomID).css("z-index",n.set.zoomZIndex).fadeIn(200)):t.testIfLoaded.apply(n,[i])):(n.set.$zoomImgCont.find("video").length>0&&n.set.$zoomImgCont.find("video")[0].pause(),n.set.$zoomImgCont.find("img,video").hide(),t.assignImgVariables.apply(n,[e("#"+n.set.zoomID)[0]]),"VIDEO"===e("#"+n.set.zoomID)[0].nodeName?(e("#"+n.set.zoomID)[0].play(),e("#"+n.set.zoomID).css("z-index",n.set.zoomZIndex).fadeIn(200)):(e("#"+n.set.zoomID).css("z-index",n.set.zoomZIndex).fadeIn(200,function(){t.manipulateZoomImg.apply(n)}),t.manipulateZoomImg.apply(n)))},changeZoomedImage:function(o){var s,n=this,i=/\D/;switch(n.set.zoomZIndex++,o){case"next":n.set.currImg.pos++;break;case"prev":n.set.currImg.pos--;break;default:i.test(o)||(n.set.currImg.pos=o)}n.set.currImg.pos=n.set.currImg.pos%n.set.currImg.len,n.set.single!==!1?(s=e(n.set.single).eq(n.set.currImg.pos),s.find("img").length>0&&(s=e(n.set.single).eq(n.set.currImg.pos).find("img"))):(s=e(n.set.zoomPool).find("img:eq("+n.set.currImg.pos+")"),s.hasClass(n.set.skipSlide)&&t.changeZoomedImage.apply(n,[o])),t.initZoomImg.apply(n,[s,n.set.currImg.pos])},manipulateZoomImg:function(){var t=this,s={},n=!1,i=e("#"+t.set.zoomID),m=1,r=1,g=0;t.set.img.contX=t.set.$zoomImgCont.width(),t.set.img.contY=e(o).height(),t.set.img.offsetY=t.set.$zoomCont.parent().offset().top,t.set.fitX&&(t.set.img.contX=t.set.img.contX-(t.set.imgOffset[1]+t.set.imgOffset[3]),m=t.set.img.contX/t.set.zoomSizeX),t.set.fitY?(t.set.img.contY=t.set.img.contY-(t.set.imgOffset[0]+t.set.imgOffset[2]),t.set.img.offsetY=t.set.imgOffset[0],r=t.set.img.contY/t.set.zoomSizeY):t.set.img.contY=t.set.img.contY-(t.set.imgOffset[0]+t.set.imgOffset[2]),t.set.img.scale=r>m?m:r,t.set.img.scale>=1?(t.set.img.scale=1,e.extend(s,{width:t.set.zoomSizeX,height:t.set.zoomSizeY})):e.extend(s,{width:t.set.img.scale*t.set.zoomSizeX,height:t.set.img.scale*t.set.zoomSizeY}),t.set.touch&&t.set.$zoomCont.css({position:"absolute",top:-t.set.img.offsetY}),t.set.img.contX>=t.set.zoomSizeX*t.set.img.scale?(t.set.img.X=(t.set.img.contX-t.set.zoomSizeX*t.set.img.scale)/2+t.set.imgOffset[3],e.extend(s,{left:t.set.img.X}),t.set.img.ratioX=0):t.set.fitX||(t.set.img.ratioX=Math.floor((t.set.zoomSizeX*t.set.img.scale-t.set.img.contX)/t.set.img.contX*100)/100,t.set.touch||(t.set.img.X=t.set.img.ratioX*t.set.img.scale*-1-t.set.imgOffset[3],e.extend(s,{left:t.set.img.X}))),t.set.img.contY>=t.set.zoomSizeY*t.set.img.scale?t.set.touch||(t.set.img.offsetY=(t.set.img.contY-t.set.zoomSizeY*t.set.img.scale)/2,e.extend(s,{top:t.set.img.offsetY}),t.set.img.ratioY=0):t.set.fitY||(t.set.img.ratioY=Math.floor((t.set.zoomSizeY*t.set.img.scale-t.set.img.contY)/t.set.img.contY*100)/100,t.set.touch||(t.set.img.Y=t.set.img.ratioY*t.set.img.scale*-1,e.extend(s,{top:t.set.img.Y}))),!t.set.img.ratioY&&!t.set.img.ratioX||n||t.set.useScroll?(t.set.useScroll&&(s.top=0),e(document,o).off("mousemove"),n=!1):(n=!0,e(document,o).on("mousemove",function(e){t.set.img.ratioX&&(t.set.img.X=e.clientX*t.set.img.ratioX*-1,s.left=t.set.img.X),t.set.img.ratioY&&(g=e.clientY-t.set.imgOffset[0]>=0?e.clientY-t.set.imgOffset[0]:0,t.set.img.Y=g*t.set.img.ratioY*-1+t.set.imgOffset[0],s.top=t.set.img.Y),i.css(s)})),i.css(s)},manipulateMG:function(e,o,t){var s=this,n="fixed-all"===s.set.mgBehaviour||"fixed"===s.set.mgBehaviour;return e.mgLeft=e.left<o.X/2&&n?0:e.left>s.set.sizeX-o.X/2-s.set.mgImgOffset[1]-s.set.mgImgOffset[3]&&n?s.set.sizeX-o.X-s.set.mgImgOffset[1]-s.set.mgImgOffset[3]:e.left-o.X/2-2,e.mgTop=e.top<o.Y/2&&n?0:e.top>s.set.sizeY-o.Y/2-s.set.mgImgOffset[0]-s.set.mgImgOffset[2]&&n?s.set.sizeY-o.Y-s.set.mgImgOffset[0]-s.set.mgImgOffset[2]:e.top-o.Y/2-2,e.bgpX=-1*Math.floor((e.left+s.set.mgImgOffset[3])*t-o.X/2),e.bgpY=-1*Math.floor((e.top+s.set.mgImgOffset[0])*t-o.Y/2),{top:e.mgTop,left:e.mgLeft,"background-position":e.bgpX+"px "+e.bgpY+"px"}},openZoom:function(){var o=this,t=null;o.trigger("remooz.zoomOpened"),o.set.isZoomed=!0,e("html,body").css("overflow","hidden"),o.set.$zoomCont.fadeIn(400),o.set.showThumbs&&(t=e(o.set.zoomThumbPool).find("img").clone(),e(o.set.zoomThumbCont).html(t))},closeZoom:function(){var t=this;t.trigger("remooz.zoomClosed"),t.set.isZoomed=!1,t.set.$zoomImgCont.find("video").length>0&&t.set.$zoomImgCont.find("video")[0].pause(),e("html,body").css("overflow","auto"),e(o).scrollTop(t.set.scrollPos),t.set.$zoomCont.fadeOut(400,function(){e(this).find(".center-zoom").removeClass("center-zoom")}),e(t.set.viewNext).off("click")},fullZoomInit:function(){var s=this;t.openZoom.apply(s),e(o).on("resize",function(){t.manipulateZoomImg.apply(s)}),s.set.viewNext!==!1&&e(s.set.viewNext).on("click",function(){t.changeZoomedImage.apply(s,["next"])}),s.set.showThumbs&&e(s.set.zoomThumbCont).on("click","img",function(){var o=e(this).index();t.changeZoomedImage.apply(s,[o])}),s.set.$zoomCont.off("remooz.closeZoom").on("remooz.closeZoom",function(){t.closeZoom.apply(s)}).off("remooz.nextZoomImg").on("remooz.nextZoomImg",function(){t.changeZoomedImage.apply(s,["next"])}).off("remooz.prevZoomImg").on("remooz.prevZoomImg",function(){t.changeZoomedImage.apply(s,["prev"])})},touchClick:function(){return Math.abs(Math.abs(m.startX)-Math.abs(m.endX))<40&&Math.abs(Math.abs(m.startY)-Math.abs(m.endY))<40},longTouch:function(){return m.endTime-m.startTime>800},zoomPoolInit:function(){var s=this,n={},i=0,m={},r={},g={},a={},l=s.set.zoomPool;"none"!==s.set.mgBehaviour&&(s.set.$zoomMG=s.find(s.set.zoomMG),m.X=s.set.$zoomMG.width(),m.Y=s.set.$zoomMG.height()),s.set.zoomTrigger!==!1&&("none"===s.set.mgBehaviour?l=s.set.zoomTrigger:l.add(s.set.zoomTrigger)),s.set.debug===!0&&console.info("Triggered element = "+l),s.on({mouseenter:function(o){var m;m="currentTarget"===s.set.zoomImg?e(o.currentTarget):e(this).parent().find(s.set.zoomImg),s.set.single===!1&&t.initZoomImg.apply(s,[m,void 0]),"none"!==s.set.mgBehaviour&&(s.set.$zoomMG=e(this).find(s.set.zoomMG),s.set.$zoomMG.show(),i=s.set.zoomSizeX/s.set.sizeX,n=e(this).offset(),n.left=Math.floor(n.left),n.top=Math.floor(n.top))},mouseleave:function(){"none"!==s.set.mgBehaviour&&s.set.$zoomMG.hide()},mousemove:function(e){"none"!==s.set.mgBehaviour&&(r.left=e.pageX-n.left,r.top=e.pageY-n.top,r.inBounds=r.top<0||r.left<0||r.top>s.set.sizeY||r.left>s.set.sizeX?!1:!0,r.inBounds?s.set.$zoomMG.css(t.manipulateMG.apply(s,[r,m,i])):s.set.$zoomMG.hide())},touchstart:function(e){s.set.touch=!0,g.X=e.originalEvent.targetTouches[0].pageX,g.Y=e.originalEvent.targetTouches[0].pageY,g.time=e.originalEvent.timeStamp,a.dir="",a.move=""},touchend:function(n){if(t.touchClick()){n.preventDefault();var i;i="currentTarget"===s.set.zoomImg?e(n.currentTarget):e(this).parent().find(s.set.zoomImg),s.set.touchOpenReplaceTab?(zoomImgSrc=i.attr("src").replace(s.set.srcRegexp,s.set.srcStrReplace),o.location=zoomImgSrc):(t.initZoomImg.apply(s,[i,void 0]),e("html,body").scrollTop(0),t.fullZoomInit.apply(s))}},click:function(n){n.preventDefault(),s.set.scrollPos=e(o).scrollTop();var i;i="currentTarget"===s.set.zoomImg?e(n.currentTarget):e(this).parent().find(s.set.zoomImg),t.initZoomImg.apply(s,[i,void 0]),e("html,body").scrollTop(0),t.fullZoomInit.apply(s)}},l)}},s={init:function(s){var r=null,g={};return g=e.extend({},n,s),i.$zoomImgCont=e(g.zoomCont),i.$zoomCont=i.$zoomImgCont.parent(),i.$zoomCont.on({click:function(o){o.preventDefault(),o.target==e(this)[0]&&i.$zoomCont.trigger("remooz.closeZoom")},touchstart:function(e){i.touch=!0,r=e.originalEvent.timeStamp},touchend:function(o){o.originalEvent.timeStamp-r<400&&(o.preventDefault(),o.target==e(this)[0]&&i.$zoomCont.trigger("remooz.closeZoom"))}}).on("click touchstart",g.prev,function(e){e.preventDefault(),i.$zoomCont.trigger("remooz.prevZoomImg")}).on("click touchstart",g.next,function(e){e.preventDefault(),i.$zoomCont.trigger("remooz.nextZoomImg")}).on("click touchstart",g.close,function(e){e.preventDefault(),i.$zoomCont.trigger("remooz.closeZoom")}),e(o).on({keydown:function(e){switch(e.keyCode){case 27:i.$zoomCont.trigger("remooz.closeZoom");break;case 37:i.$zoomCont.trigger("remooz.prevZoomImg");break;case 39:i.$zoomCont.trigger("remooz.nextZoomImg")}},touchstart:function(e){i.touch=!0,m.startX=e.originalEvent.targetTouches[0].clientX,m.startY=e.originalEvent.targetTouches[0].clientY,m.endX=e.originalEvent.targetTouches[0].clientX,m.endY=e.originalEvent.targetTouches[0].clientY,m.startTime=(new Date).getTime(),m.endTime=(new Date).getTime()},touchmove:function(e){m.endX=e.originalEvent.targetTouches[0].clientX,m.endY=e.originalEvent.targetTouches[0].clientY,m.endTime=(new Date).getTime()}}),this.each(function(o){var m=e(this),r=m.data();m.set=e.extend({},g,r,i),m.set.debug===!0&&(console.warn(":::: REMOOZ Debug has been set to true ::::"),console.log("Options -> ",e.extend({},n,s,r))),0===e(m.set.zoomMG).length&&"none"!==m.set.mgBehaviour&&(m.set.debug===!0&&console.info("mgBehaviour set to none, no magnifying glass found: "+m.set.zoomMG),m.set.mgBehaviour="none"),0===e(m.set.zoomTrigger).length&&m.set.zoomTrigger!==!1&&(m.set.debug===!0&&console.info("zoomTrigger set to false, "+m.set.zoomTrigger+" element not found"),m.set.zoomTrigger=!1),0!==e(m.set.zoomThumbPool).length&&0!==e(m.set.zoomThumbCont).length||m.set.showThumbs===!1||(m.set.debug===!0&&console.info("showThumbs set to false, "+m.set.zoomThumbPool+", "+m.set.zoomThumbCont+" elements not found"),m.set.showThumbs=!1),0===e(m.set.single).length&&m.set.single!==!1?(m.set.debug===!0&&console.info("showThumbs set to false, "+m.set.single+" elements not found"),m.set.showThumbs=!1):m.set.singleIndex=o,t.zoomPoolInit.apply(m)})},update:function(o){return this.each(function(){var s=e(this),m=s.data();s.set=e.extend({},n,o,m,i),t.zoomPoolInit.apply(s)})},closeZoom:function(){return this.each(function(){var o=e(this);o.set=o.data(),o.set.$zoomCont.trigger("remooz.closeZoom")})},destroy:function(o){return this.each(function(){var s=e(this),m=s.data();s.set=e.extend({},n,o,m,i),t.zoomPoolInit.apply(s)})}},n={fitX:!0,fitY:!1,srcRegexp:/\.(jpg|jpeg|png|gif)$/i,srcStrReplace:"-large.$1",showThumbs:!1,single:!1,zoomTrigger:!1,imgOffset:[0,0,0,0],mgBehaviour:"fixed",mgImgOffset:[0,0,0,0],useScroll:!1,touchOpenReplaceTab:!1,zoomCont:"#js-remooz-zoomContainer",zoomThumbCont:"#js-remooz-zoomThumbnailContainer",zoomPool:"#js-remooz-imagePool",zoomThumbPool:"#js-remooz-thumbnailPool",zoomMG:"#js-remooz-zoomMagnifyingGlass",zoomImg:"img.current",close:".js-remooz-close",prev:".js-remooz-prev",next:".js-remooz-next",preloader:".js-remooz-preloader",skipSlide:"redils-duplicated",debug:!1},i={$zoomMG:{},$zoomCont:{},$zoomImgCont:{},touch:!1,isZoomed:!1,isMagnified:!1,currImg:{},img:{scale:1},zoomZIndex:1,zoomSizeX:0,zoomSizeY:0,sizeX:0,sizeY:0,singleIndex:null,zoomID:"",scrollPos:0},m={};o.requestAnimFrame=function(){return o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame||function(e){o.setTimeout(e,1e3/60)}}(),e.fn.remooz=function(o){return s[o]?s[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void e.error("Method "+o+" does not exist on jQuery.remooz"):s.init.apply(this,arguments)}});